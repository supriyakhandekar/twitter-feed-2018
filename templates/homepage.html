<!DOCTYPE html>

<html>
    <title>
    </title>
    <body>
      <h1>Welcome to Twitter</h1>
      <ul id="messages"></ul>
        <form action="">
        <input id="myMessage" autocomplete="off" /><button id='sendButton'>Send</button>
    </form>
    </body>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>

      var socket;

      $(document).ready(function() {
          //var socket = io.connect('http://localhost:5000/');
          var socket = io.connect('http://' + document.domain + ':' + location.port);
          alert('test');
          debugger;

          socket.on('connect', function() {
              socket.emit('my event', {data: 'I\'m connected!'});
              console.log('User has been connected!');
          });

          socket.on('message', function(msg) {
              $('#messages').append("<li>"+msg+"</li>")
          });

      });


      $('#sendButton').on("click", function() {
          alert('sending!')
          var myMessage = $('#myMessage').val()
          socket.send(myMessage)
      });

    </script>
</html>
